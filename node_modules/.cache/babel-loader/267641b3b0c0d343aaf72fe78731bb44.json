{"ast":null,"code":"/**\r\n * DevExtreme (esm/exporter/svg_creator.js)\r\n * Version: 21.1.4\r\n * Build date: Mon Jun 21 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../core/renderer\";\nimport ajax from \"../core/utils/ajax\";\nimport { getWindow } from \"../core/utils/window\";\nvar window = getWindow();\nimport { isFunction } from \"../core/utils/type\";\nimport { each } from \"../core/utils/iterator\";\nimport { getSvgElement, getSvgMarkup } from \"../core/utils/svg\";\nimport { when, Deferred } from \"../core/utils/deferred\";\nexport var svgCreator = {\n  _markup: \"\",\n  _imageArray: {},\n  _imageDeferreds: [],\n  _getBinaryFile: function (src, callback) {\n    ajax.sendRequest({\n      url: src,\n      method: \"GET\",\n      responseType: \"arraybuffer\"\n    }).done(callback).fail(function () {\n      callback(false);\n    });\n  },\n  _loadImages: function () {\n    var that = this;\n    each(that._imageArray, function (src) {\n      var deferred = new Deferred();\n\n      that._imageDeferreds.push(deferred);\n\n      that._getBinaryFile(src, function (response) {\n        if (!response) {\n          delete that._imageArray[src];\n          deferred.resolve();\n          return;\n        }\n\n        var i;\n        var binary = \"\";\n        var bytes = new Uint8Array(response);\n        var length = bytes.byteLength;\n\n        for (i = 0; i < length; i++) {\n          binary += String.fromCharCode(bytes[i]);\n        }\n\n        that._imageArray[src] = \"data:image/png;base64,\" + window.btoa(binary);\n        deferred.resolve();\n      });\n    });\n  },\n  _parseImages: function (element) {\n    var href;\n    var that = this;\n\n    if (\"image\" === element.tagName) {\n      href = $(element).attr(\"href\") || $(element).attr(\"xlink:href\");\n\n      if (!that._imageArray[href]) {\n        that._imageArray[href] = \"\";\n      }\n    }\n\n    each(element.childNodes, function (_, element) {\n      that._parseImages(element);\n    });\n  },\n  _prepareImages: function (svgElem) {\n    this._parseImages(svgElem);\n\n    this._loadImages();\n\n    return when.apply($, this._imageDeferreds);\n  },\n  getData: function (data, options) {\n    var markup;\n    var that = this;\n    var svgElem = getSvgElement(data);\n    var $svgObject = $(svgElem);\n    markup = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>' + getSvgMarkup($svgObject.get(0), options.backgroundColor);\n    return that._prepareImages(svgElem).then(() => {\n      each(that._imageArray, function (href, dataURI) {\n        var regexpString = \"href=['|\\\"]\".concat(href, \"['|\\\"]\");\n        markup = markup.replace(new RegExp(regexpString, \"gi\"), 'href=\"'.concat(dataURI, '\"'));\n      });\n      return isFunction(window.Blob) ? that._getBlob(markup) : that._getBase64(markup);\n    });\n  },\n  _getBlob: function (markup) {\n    return new window.Blob([markup], {\n      type: \"image/svg+xml\"\n    });\n  },\n  _getBase64: function (markup) {\n    return window.btoa(markup);\n  }\n};\nexport function getData(data, options) {\n  return svgCreator.getData(data, options);\n}","map":{"version":3,"sources":["C:/Users/Abdullah/personal-portfolio/node_modules/devextreme/esm/exporter/svg_creator.js"],"names":["$","ajax","getWindow","window","isFunction","each","getSvgElement","getSvgMarkup","when","Deferred","svgCreator","_markup","_imageArray","_imageDeferreds","_getBinaryFile","src","callback","sendRequest","url","method","responseType","done","fail","_loadImages","that","deferred","push","response","resolve","i","binary","bytes","Uint8Array","length","byteLength","String","fromCharCode","btoa","_parseImages","element","href","tagName","attr","childNodes","_","_prepareImages","svgElem","apply","getData","data","options","markup","$svgObject","get","backgroundColor","then","dataURI","regexpString","concat","replace","RegExp","Blob","_getBlob","_getBase64","type"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/exporter/svg_creator.js)\r\n * Version: 21.1.4\r\n * Build date: Mon Jun 21 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../core/renderer\";\r\nimport ajax from \"../core/utils/ajax\";\r\nimport {\r\n    getWindow\r\n} from \"../core/utils/window\";\r\nvar window = getWindow();\r\nimport {\r\n    isFunction\r\n} from \"../core/utils/type\";\r\nimport {\r\n    each\r\n} from \"../core/utils/iterator\";\r\nimport {\r\n    getSvgElement,\r\n    getSvgMarkup\r\n} from \"../core/utils/svg\";\r\nimport {\r\n    when,\r\n    Deferred\r\n} from \"../core/utils/deferred\";\r\nexport var svgCreator = {\r\n    _markup: \"\",\r\n    _imageArray: {},\r\n    _imageDeferreds: [],\r\n    _getBinaryFile: function(src, callback) {\r\n        ajax.sendRequest({\r\n            url: src,\r\n            method: \"GET\",\r\n            responseType: \"arraybuffer\"\r\n        }).done(callback).fail((function() {\r\n            callback(false)\r\n        }))\r\n    },\r\n    _loadImages: function() {\r\n        var that = this;\r\n        each(that._imageArray, (function(src) {\r\n            var deferred = new Deferred;\r\n            that._imageDeferreds.push(deferred);\r\n            that._getBinaryFile(src, (function(response) {\r\n                if (!response) {\r\n                    delete that._imageArray[src];\r\n                    deferred.resolve();\r\n                    return\r\n                }\r\n                var i;\r\n                var binary = \"\";\r\n                var bytes = new Uint8Array(response);\r\n                var length = bytes.byteLength;\r\n                for (i = 0; i < length; i++) {\r\n                    binary += String.fromCharCode(bytes[i])\r\n                }\r\n                that._imageArray[src] = \"data:image/png;base64,\" + window.btoa(binary);\r\n                deferred.resolve()\r\n            }))\r\n        }))\r\n    },\r\n    _parseImages: function(element) {\r\n        var href;\r\n        var that = this;\r\n        if (\"image\" === element.tagName) {\r\n            href = $(element).attr(\"href\") || $(element).attr(\"xlink:href\");\r\n            if (!that._imageArray[href]) {\r\n                that._imageArray[href] = \"\"\r\n            }\r\n        }\r\n        each(element.childNodes, (function(_, element) {\r\n            that._parseImages(element)\r\n        }))\r\n    },\r\n    _prepareImages: function(svgElem) {\r\n        this._parseImages(svgElem);\r\n        this._loadImages();\r\n        return when.apply($, this._imageDeferreds)\r\n    },\r\n    getData: function(data, options) {\r\n        var markup;\r\n        var that = this;\r\n        var svgElem = getSvgElement(data);\r\n        var $svgObject = $(svgElem);\r\n        markup = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?>' + getSvgMarkup($svgObject.get(0), options.backgroundColor);\r\n        return that._prepareImages(svgElem).then(() => {\r\n            each(that._imageArray, (function(href, dataURI) {\r\n                var regexpString = \"href=['|\\\"]\".concat(href, \"['|\\\"]\");\r\n                markup = markup.replace(new RegExp(regexpString, \"gi\"), 'href=\"'.concat(dataURI, '\"'))\r\n            }));\r\n            return isFunction(window.Blob) ? that._getBlob(markup) : that._getBase64(markup)\r\n        })\r\n    },\r\n    _getBlob: function(markup) {\r\n        return new window.Blob([markup], {\r\n            type: \"image/svg+xml\"\r\n        })\r\n    },\r\n    _getBase64: function(markup) {\r\n        return window.btoa(markup)\r\n    }\r\n};\r\nexport function getData(data, options) {\r\n    return svgCreator.getData(data, options)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}